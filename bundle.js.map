{"version":3,"sources":["webpack:///./src/scripts/api/card-details.js","webpack:///./src/scripts/api/link-generator.js","webpack:///./src/scripts/api/pagination.js","webpack:///./src/scripts/api/search-state.js","webpack:///./src/scripts/api/sort.js","webpack:///./src/scripts/api/utilities.js","webpack:///./src/scripts/index.js","webpack:///./src/scripts/api/settings.js","webpack:///./src/scripts/api/api.js","webpack:///./src/scripts/api/list-templates.js","webpack:///./src/assets/modal/modal.js","webpack:///./src/scripts/api/cards-comparison.js"],"names":["cardDetails","cardModal","document","getElementById","modalId","cardTitle","querySelector","cardBody","noImgDiv","listSetings","list","generateTextParts","card","textParts","text","map","part","Array","isArray","join","replaceTextShorts","generateList","listDetails","name","title","item","generateCardDetails","id","getCurrentCards","find","imgUrl","imageUrl","showDefaultImg","rulings","foreignNames","legalities","innerHTML","manaCost","cmc","type","setName","rarity","addEventToCards","cards","querySelectorAll","cardClass","forEach","addEventListener","onClickOpen","call","dataset","cardId","linkGenerator","baseLink","carsdUrl","dom","settings","generateRandom","displayCardsAmount","generateSpecialLink","linkPart","addSettingsUrl","settingsParts","pages","push","paginationCurrentPage","onlyWithImg","addName","form","value","checked","from","searchName","checkbox","length","addColors","colors","searchColorIdentity","filter","color","generateSpecialSelectUrl","urls","selects","advancedSelects","select","generateItemCompareUrl","items","itemCompare","urlParts","valueElement","compareOperatorElement","compareOperator","generate","url","advancedSearch","encodeURI","console","log","generateAutocompleteUrl","namePart","pagination","cardsCountWrap","setHeaderSettings","header","totalCount","get","undefined","createPaginationWrap","paginationDiv","removeNode","paginationContent","createElement","classList","add","insertAfter","paginationTotalPages","Math","ceil","addNavigationButtons","isFirst","isCurrent","unshift","content","isLast","lastElement","addDotsElement","i","currentElement","prevElement","splice","createPaginationList","listCurrent","createPaginationItem","element","textNode","createTextNode","appendChild","page","goToPage","e","pageNumber","parseInt","createPagination","paginationElements","changeDisplayCardsAmount","displayAmount","displayCardsSelect","searchState","state","searchBtn","elementsToDisable","cardList","loaderDom","addLoader","button","textContent","removeLoader","disableElements","disableElementClass","enableElements","remove","searchingInProgress","isSearchInProgress","searchingEnded","sort","sortElement","field","sortType","selectedOptions","sortedCard","a","b","aVal","bVal","utilities","newNode","referenceNode","parent","parentNode","insertBefore","nextSibling","node","removeChild","initApi","apiSettings","currentCards","cardsComparison","addCardClass","autoCompleteSetts","listClass","listItemClass","displayList","cardsList","cardListSection","changeGridBtn","expandBtn","searchAdvanced","selectFormats","autoCompleteInputs","setCurrentCards","mtgApi","listSettings","createList","sortSelect","sortedCards","generateTemplate","initCardButtonEvents","listPromise","postsPromise","fetch","then","data","headers","json","catch","err","error","showAdvancedMenu","contains","changeDisplayCards","initSearch","preventDefault","initRandom","initEvents","initAdvancedFormSelects","link","option","listTemplates","comparisonSettings","msgEmptyList","getGridTemplate","getAddBtn","getListTemplate","string","shortClass","regex","matches","match","exec","imgName","replace","changeGrid","display","initEvent","btn","modal","initFromStart","animationName","modalClass","bodyClass","showModalClass","overlayClass","triggerButtonData","triggerBtnDataset","closeBtn","removeOverlay","overlay","addOverlay","existingOverlay","body","openModal","modalElement","style","setTimeout","initAllButtons","buttons","closeModal","visibleModal","clickModalContent","target","initSpecificModal","init","selectedCards","JSON","parse","localStorage","getItem","buttonStates","dataChangeText","action","switchPanel","panel","hasClassActive","currentState","refreshCompareList","compareList","comparisonRemoveBtns","removeFromCompare","addToCompare","cardInSelectedCards","setItem","stringify","carId","cardIndex","findIndex","addEventToCardButton","stopPropagation","currentBtnText","newBtnText","textChange","addModal","setAttribute","addPanel","comparisonPanel","generateAttributes","attributeText","attributes","attribute","attributeValue","compareCards","modalBody","initComparisonPanel","switchPanelBtn","compareBtn"],"mappings":"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","file":"bundle.js","sourcesContent":["import modal from './../../assets/modal/modal';\nimport apiSettings from './settings';\nimport listTemplates from './list-templates';\n\nconst cardDetails = (function () {\n  const cardModal = document.getElementById(apiSettings.cardDetails.modalId);\n  const cardTitle = cardModal.querySelector('.card-details__title');\n  const cardBody = cardModal.querySelector('.card-details__body');\n  const noImgDiv = `\n    <div class=\"card-details__no-img-wrap\">\n      <img class=\"card-details__no-img\" src=\"img/logo-magic.png\" alt='No img'>\n      <span class=\"card-details__no-img-label\">No image</span>\n    </div>\n  `;  \n  const listSetings = apiSettings.list;\n\n  function generateTextParts(card) {\n    const textParts = ['artist', 'text', 'flavor', 'power', 'toughness', 'color', 'layout', 'printings', 'multiverseid'];\n    const text = textParts.map(part => {\n      if (!card[part]) return '';\n\n      if (Array.isArray(card[part])) {\n        card[part] = card[part].join(', ');\n      }\n\n      return `\n          <div class=\"card-details__text\">\n            <h5 class=\"card-details__text-label\">${part}:</h5>\n            ${listTemplates.replaceTextShorts(card[part])}\n          </div>\n        `;\n    }).join('');\n\n    return text;\n  }\n\n  function generateList(listDetails) {\n    const { card, name, title, text } = listDetails;\n    if (!card[name]) return '';\n\n    const list = card[name].map(item => `\n      <li class=\"card-details__list-item\">\n        <span class=\"card-details__list-title\">${item[title]}: </span>\n        ${item[text]}\n      </li>\n    `).join('');\n\n    return `\n      <div class=\"card-details__text\">\n        <h5 class=\"card-details__text-label\">${name}:</h5>    \n        <ul class=\"card-details__list\">${list}</ul>\n      </div>\n    `;    \n  }\n\n  function generateCardDetails(id) {\n    const card = apiSettings.getCurrentCards().find(item => item.id === id);\n    if (!card) return false;\n\n    let imgUrl = card.imageUrl || noImgDiv;\n    imgUrl = listSetings.showDefaultImg ? 'img/default-card.jpg' : imgUrl;\n\n    const text = generateTextParts(card);\n    const rulings = generateList({ card, name: 'rulings', title: 'date', text: 'text' });\n    const foreignNames = generateList({ card, name: 'foreignNames', title: 'language', text: 'name' });\n    const legalities = generateList({ card, name: 'legalities', title: 'format', text: 'legality' });\n\n    cardTitle.innerHTML = card.name;\n    cardBody.innerHTML = `\n      <div class=\"card-details__img-wrap\">\n        ${card.imageUrl ? `<img src=\"${imgUrl}\" alt=\"${card.name}\" class=\"card-details__img\"/>` : noImgDiv}\n      </div>\n\n      <div class=\"card-details__details\">\n          <header class=\"card-details__header\">\n            <h4 class=\"card-details__name\">${card.name}</h4>\n            <span class=\"card-details__mana\">${listTemplates.replaceTextShorts(card.manaCost, 'card-details__attribute-mana')}</span>\n            <span class=\"card-details__mana-total\">${card.cmc ? `(${card.cmc})` : ''}</span>\n\n            <div class=\"card-details__type\">${card.type}</div>\n            <div class=\"card-details__set-rarity\">${card.setName} - ${card.rarity}</div>\n          </header>\n\n          ${listTemplates.replaceTextShorts(text)}\n          ${rulings}\n          ${legalities}\n          ${foreignNames}\n      </div>\n    `;\n  }\n\n  function addEventToCards() {\n    const cards = document.querySelectorAll(`.${apiSettings.cardDetails.cardClass}`);\n    cards.forEach(card => {\n      card.addEventListener('click', function () {\n        modal.onClickOpen.call(this);\n        generateCardDetails(this.dataset.cardId);\n      });\n    });\n  }\n\n  return {\n    addEventToCards,\n  };\n}());\n\nexport default cardDetails;\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/api/card-details.js","import apiSettings from './settings';\n\nconst linkGenerator = (function () {\n  const baseLink = 'https://api.magicthegathering.io/v1/';\n  const carsdUrl = `${baseLink}cards`;\n  const dom = apiSettings.dom;\n  const settings = apiSettings.list;\n\n  function generateRandom() {\n    return `${carsdUrl}?random=true&pageSize=${settings.displayCardsAmount}&contains=imageUrl`;\n  }\n\n  function generateSpecialLink(linkPart) {\n    return `${baseLink}${linkPart}`;\n  }\n\n  function addSettingsUrl() {\n    let settingsParts = [];\n\n    if (settings.pages && settings.displayCardsAmount) {\n      settingsParts.push(`page=${settings.paginationCurrentPage}&pageSize=${settings.displayCardsAmount}`);\n    }\n\n    if (settings.onlyWithImg) {\n      settingsParts.push('contains=imageUrl');\n    }\n\n    return settingsParts.join('&');\n  }\n\n  function addName() {\n    const name = dom.form.querySelector('[name=\"name\"]').value;\n    const checked = Array.from(dom.searchName).find(checkbox => checkbox.checked);\n    \n    if (!name.length) return '';\n\n    return `${checked.value}=${name}`;\n  }\n\n  function addColors() {\n    const colors = Array.from(dom.searchColorIdentity)\n      .filter(color => color.checked)\n      .map(color => color.value);\n      \n    if (!colors.length) return '';\n\n    return `colorIdentity=${colors.join(',')}`;\n  }\n\n  function generateSpecialSelectUrl() {\n    const urls = [];\n    const selects = dom.advancedSelects;\n    \n    selects.forEach(select => {\n      const value = select.value;\n      const name = select.name;\n\n      if (value.length) {\n        urls.push(`${name}=${value}`);\n      }\n    });\n\n    return urls;\n  }\n\n  function generateItemCompareUrl() {\n    const items = dom.itemCompare;\n    const urlParts = [];\n\n    for (const item of items) {\n      const type = item.dataset.itemCompare;\n      const valueElement = document.querySelector(`[name=\"${type}-compare\"]`);\n      const compareOperatorElement = document.querySelector(`[name=\"${type}-compare-oprerator\"]`);      \n      if (!type.length || !valueElement || !compareOperatorElement) return false;\n\n      const value = valueElement.value;\n      const compareOperator = compareOperatorElement.value;      \n\n      if (value) urlParts.push(`${type}=${compareOperator}${value}`);\n    }\n\n    return urlParts;\n  }\n\n  function generate() {\n    let url = `${carsdUrl}?`;\n    let urlParts = [];\n\n    urlParts.push(\n        addName(),\n        addColors(),\n        addSettingsUrl());\n\n    if (settings.advancedSearch) {\n      urlParts.push(...generateSpecialSelectUrl());\n      urlParts.push(...generateItemCompareUrl());\n    }\n\n    urlParts = urlParts.filter(part => part.length).join('&');\n    urlParts = encodeURI(urlParts);\n    url += urlParts;\n\n    console.log('url', url);\n\n    return url;\n  }\n\n  function generateAutocompleteUrl() {\n    const namePart = encodeURI(addName());\n    const url = `${carsdUrl}?${namePart}&pageSize=8&page1&contains=imageUrl`;\n\n    return url;\n  }\n\n  return {\n    generate,\n    generateRandom,\n    generateSpecialLink,\n    generateItemCompareUrl,\n    generateAutocompleteUrl,\n  };\n}());\n\nexport default linkGenerator;\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/api/link-generator.js","import api from './api';\nimport apiSettings from './settings';\nimport utilities from './utilities';\n\nconst pagination = (function () {\n  const cardsCountWrap = apiSettings.dom.cardsCountWrap;\n  const dom = apiSettings.dom;\n  const listSetings = apiSettings.list;\n\n  function setHeaderSettings(header) {\n    listSetings.totalCount = header.get('Total-Count') ? header.get('Total-Count') : false;\n\n    if (listSetings.totalCount === false || listSetings.totalCount === undefined) {\n      cardsCountWrap.innerHTML = '';\n      return false;\n    }\n\n    if (cardsCountWrap) {\n      cardsCountWrap.innerHTML = `\n        <div class=\"cards-count__msg\">Founded ${listSetings.totalCount} ${listSetings.totalCount <= 1 ? 'card' : 'cards'}</div>\n      `;\n    }\n  }\n\n  function createPaginationWrap() {\n    let paginationDiv = document.querySelector('.pagination');\n    if (paginationDiv) {\n      utilities.removeNode(paginationDiv);\n    }\n\n    if (listSetings.totalCount <= 0) {\n      return false;\n    }\n\n    const paginationContent = document.createElement('div');\n    paginationContent.classList.add('pagination', 'container');\n    utilities.insertAfter(paginationContent, document.querySelector('.cards-list'));\n\n    listSetings.paginationTotalPages = Math.ceil(listSetings.totalCount / listSetings.displayCardsAmount);\n\n    if (listSetings.paginationTotalPages === 1) {\n      return false;\n    }\n\n    return paginationContent;\n  }\n\n  function addNavigationButtons(list) {\n    /* add first */\n    if (list[0].isFirst && !list[0].isCurrent) {\n      list.unshift({\n        type: 'prev',\n        content: '<',\n        isCurrent: false,\n        isFirst: false,\n        isLast: false,\n      });\n    }\n\n    const lastElement = list.length - 1;\n\n    /* add last */\n    if (list[lastElement].isLast && !list[lastElement].isCurrent) {\n      list.push({\n        type: 'next',\n        content: '>',\n        isCurrent: false,\n        isFirst: false,\n        isLast: false,\n      });\n    }\n\n    return list;\n  }\n\n  function addDotsElement(list) {\n    for (let i = 0; i < list.length; i++) {\n      const currentElement = list[i];\n      const prevElement = list[i - 1];\n      \n      if (prevElement && (currentElement.content - prevElement.content > 1)) {\n        list.splice(i, 0, {\n          type: 'dots',\n          content: '...',\n          isCurrent: false,\n          isFirst: false,\n          isLast: false,\n        });\n      }\n    }\n  }\n\n  function createPaginationList() {\n    const list = [];\n    const listCurrent = [];\n\n    if (listSetings.paginationTotalPages <= 6) {\n      for (let i = 1; i <= listSetings.paginationTotalPages; i++) {\n        list.push({\n          type: 'number',\n          content: i,\n          isCurrent: listSetings.paginationCurrentPage === i,\n          isFirst: i === 1,\n          isLast: i === listSetings.paginationTotalPages,\n        });\n      }\n      addNavigationButtons(list);\n      return list;      \n    }\n\n    // dodam pierwszy i ostatni element\n    list.push({\n      type: 'number',\n      content: 1,\n      isCurrent: listSetings.paginationCurrentPage === 1,\n      isFirst: true,\n      isLast: false,\n    });\n\n    if (listSetings.paginationTotalPages > 1) {\n      list.push({\n        type: 'number',\n        content: listSetings.paginationTotalPages,\n        isCurrent: listSetings.paginationCurrentPage === listSetings.paginationTotalPages,\n        isFirst: false,\n        isLast: true,\n      });      \n    }\n\n    // add current if first element is current\n    if (listSetings.paginationCurrentPage === 1) {\n      listCurrent.push({\n        type: 'number',\n        content: listSetings.paginationCurrentPage + 1,\n        isCurrent: false,\n        isFirst: false,\n        isLast: false,\n      });\n\n      listCurrent.push({\n        type: 'number',\n        content: listSetings.paginationCurrentPage + 2,\n        isCurrent: false,\n        isFirst: false,\n        isLast: false,\n      });\n      // add current if second element is current\n    } else if (listSetings.paginationCurrentPage === 2) {\n      listCurrent.push({\n        type: 'number',\n        content: listSetings.paginationCurrentPage,\n        isCurrent: true,\n        isFirst: false,\n        isLast: false,\n      });\n\n      listCurrent.push({\n        type: 'number',\n        content: listSetings.paginationCurrentPage + 1,\n        isCurrent: false,\n        isFirst: false,\n        isLast: false,\n      });\n      // add current if penultimate element is current\n    } else if (listSetings.paginationCurrentPage === (listSetings.paginationTotalPages - 1)) {\n      listCurrent.push({\n        type: 'number',\n        content: listSetings.paginationCurrentPage - 1,\n        isCurrent: false,\n        isFirst: false,\n        isLast: false,\n      });\n\n      listCurrent.push({\n        type: 'number',\n        content: listSetings.paginationCurrentPage,\n        isCurrent: true,\n        isFirst: false,\n        isLast: false,\n      });\n      // add current if last element is current\n    } else if (listSetings.paginationCurrentPage === listSetings.paginationTotalPages) {\n      listCurrent.push({\n        type: 'number',\n        content: listSetings.paginationCurrentPage - 2,\n        isCurrent: false,\n        isFirst: false,\n        isLast: false,\n      });\n\n      listCurrent.push({\n        type: 'number',\n        content: listSetings.paginationCurrentPage - 1,\n        isCurrent: false,\n        isFirst: false,\n        isLast: false,\n      });\n      // others\n    } else {\n      listCurrent.push({\n        type: 'number',\n        content: listSetings.paginationCurrentPage - 1,\n        isCurrent: false,\n        isFirst: false,\n        isLast: false,\n      });\n\n      listCurrent.push({\n        type: 'number',\n        content: listSetings.paginationCurrentPage,\n        isCurrent: true,\n        isFirst: false,\n        isLast: false,\n      });\n\n      listCurrent.push({\n        type: 'number',\n        content: listSetings.paginationCurrentPage + 1,\n        isCurrent: false,\n        isFirst: false,\n        isLast: false,\n      });      \n    }\n\n    // insert current elements between first and last\n    list.splice(1, 0, ...listCurrent);\n    addNavigationButtons(list);\n    addDotsElement(list);\n    return list;      \n  }\n\n  function createPaginationItem(element) {\n    const item = element.type !== 'dots' ? document.createElement('button') : document.createElement('span');\n    const textNode = document.createTextNode(element.content);\n    item.appendChild(textNode);\n    item.classList.add('pagination__item');\n\n    if (element.type !== 'dots') {\n      item.classList.add('pagination__item--btn');\n    } else {\n      item.classList.add('pagination__item--dots');\n    }\n\n    // add data attribute\n    if (element.type === 'number') {\n      item.dataset.page = element.content === listSetings.paginationCurrentPage ? 0 : element.content;\n    } else if (element.type === 'prev') {\n      item.dataset.page = listSetings.paginationCurrentPage - 1;\n    } else if (element.type === 'next') {\n      item.dataset.page = listSetings.paginationCurrentPage + 1;\n    }\n\n    if (element.isCurrent) {\n      item.classList.add('pagination__item--current');\n    }\n\n    return item;\n  }\n\n  function goToPage(e) {\n    const pageNumber = parseInt(this.dataset.page, 10);\n    if (!pageNumber) {\n      return false;\n    }\n\n    listSetings.paginationCurrentPage = pageNumber;\n    api.generateList();\n  }\n\n  function createPagination() {\n    const paginationContent = createPaginationWrap();\n    if (!paginationContent) return false;\n    const paginationElements = createPaginationList();\n\n    for (const element of paginationElements) {\n      const item = createPaginationItem(element);\n      paginationContent.appendChild(item);\n      item.addEventListener('click', goToPage);\n    }\n  }\n\n  function changeDisplayCardsAmount() {\n    const displayAmount = parseInt(dom.displayCardsSelect.value, 10);\n    if (displayAmount) {\n      listSetings.displayCardsAmount = displayAmount;\n    }\n  }\n\n  return {\n    setHeaderSettings,\n    createPagination,\n    changeDisplayCardsAmount,\n  };\n}());\n\nexport default pagination;\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/api/pagination.js","import apiSettings from './settings';\n\nconst searchState = (function () {\n  const { dom, state } = apiSettings;\n  const searchBtn = dom.searchBtn;\n  const elementsToDisable = [dom.searchBtn, dom.cardList];\n\n  const loaderDom = `\n    <div class=\"spinner\">\n      <div class=\"rect1\"></div>\n      <div class=\"rect2\"></div>\n      <div class=\"rect3\"></div>\n      <div class=\"rect4\"></div>\n      <div class=\"rect5\"></div>\n    </div>\n  `;\n\n  function addLoader(button) {\n    button.dataset.text = button.textContent;\n    button.innerHTML = loaderDom;\n  }\n\n  function removeLoader(button) {\n    button.innerHTML = button.dataset.text;\n    button.dataset.text = '';\n  }\n\n  function disableElements() {\n    elementsToDisable.forEach(element => {\n      if (element) {\n        element.classList.add(state.disableElementClass); \n      }\n    });\n  }\n\n  function enableElements() {\n    elementsToDisable.forEach(element => {\n      if (element) {\n        element.classList.remove(state.disableElementClass);\n      }\n    });\n  }\n\n  function searchingInProgress() {\n    state.isSearchInProgress = true;\n    addLoader(searchBtn);\n    disableElements();\n  }\n\n  function searchingEnded() {\n    state.isSearchInProgress = false;\n    removeLoader(searchBtn);\n    enableElements();\n  }\n\n  return {\n    searchingInProgress,\n    searchingEnded,\n  };\n}());\n\nexport default searchState;\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/api/search-state.js","import apiSettings from './settings';\n\nconst sort = (function () {\n  function sortElement(select) {\n    const field = select.value || '';\n    const sortType = select.selectedOptions[0].dataset.sortType || 'asc';\n    const cards = [...apiSettings.getCurrentCards()];\n\n    if (!field.length) {\n      return cards;\n    }\n\n    const sortedCard = cards.sort((a, b) => {\n      const aVal = a[field];\n      const bVal = b[field];\n\n      if (!(field in a) || !(field in b)) {\n        return 1;\n      }\n      \n      if (sortType === 'asc') {\n        return aVal > bVal ? 1 : -1;\n      }\n\n      return aVal < bVal ? 1 : -1;\n    });\n\n    return sortedCard;\n  }\n\n  return {\n    sortElement,\n  };  \n}());\n\nexport default sort;\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/api/sort.js","const utilities = (function () {\n  function insertAfter(newNode, referenceNode) {\n    const parent = referenceNode.parentNode;\n    parent.insertBefore(newNode, referenceNode.nextSibling);\n  }\n\n  function removeNode(node) {\n    const parent = node.parentNode;\n    return parent.removeChild(node);\n  }\n\n  return {\n    insertAfter,\n    removeNode,\n  };\n}());\n\nexport default utilities;\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/api/utilities.js","import mtgApi from './api/api';\n\nmtgApi.initApi();\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/index.js","const apiSettings = (function () {\n  const form = document.querySelector('.js__search-form');\n  const currentCards = [];\n\n  const cardsComparison = {\n    addCardClass: 'comparison__add-btn',\n  };\n\n  const autoCompleteSetts = {\n    listClass: 'autocomplete__list',\n    listItemClass: 'autocomplete__list-item',\n  };\n\n  const state = {\n    isSearchInProgress: false,\n    disableElementClass: 'js__search-element--is-disabled',\n  };\n\n  const cardDetails = {\n    modalId: 'modal-card-details',\n    cardClass: 'cards-list__item',\n  };\n\n  const list = {\n    onlyWithImg: true,\n    paginationCurrentPage: 1,\n    paginationTotalPages: 0,\n    pages: 1,\n    displayCardsAmount: 8,\n    totalCount: 0,\n    displayList: 'grid',\n    showDefaultImg: false,\n    advancedSearch: false,\n  };  \n\n  const dom = {\n    form,\n    searchBtn: document.querySelector('.js__search-btn'),\n    cardsList: document.querySelector('.cards-list'),\n    searchName: form.querySelectorAll('[name=\"search-card\"]'),\n    searchColorIdentity: form.querySelectorAll('[name=\"colorIdentity\"]'),\n    sort: document.querySelector('.js-sort'),\n    cardList: document.querySelector('.cards-list '),\n    cardsCountWrap: document.querySelector('.cards-count'),\n    cardListSection: document.querySelector('.cards-list__section'),\n    displayCardsSelect: document.querySelector('.js-change-display-cards'),\n    changeGridBtn: document.querySelectorAll('.list-grid__btn'),\n    expandBtn: document.querySelector('.btn-expand'),\n    searchAdvanced: document.querySelector('.search__advanced'),\n    selectFormats: document.querySelector('.js-select-formats'),\n    advancedSelects: document.querySelectorAll('.js-advanced-selects'),\n    itemCompare: document.querySelectorAll('[data-item-compare]'),\n    autoCompleteInputs: document.querySelectorAll('.js-autocomplete--input'),\n  };\n\n  function getCurrentCards() {\n    return currentCards;\n  }\n\n  function setCurrentCards(cards) {\n    cards = Array.from(cards);\n    currentCards.length = 0;\n    currentCards.push(...cards);\n  }\n \n  return {\n    list,\n    dom,\n    cardDetails,\n    getCurrentCards,\n    setCurrentCards,\n    state,\n    autoCompleteSetts,\n    cardsComparison,\n  };\n}());\n\nexport default apiSettings;\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/api/settings.js","import apiSettings from './settings';\nimport linkGenerator from './link-generator';\nimport listTemplates from './list-templates';\nimport pagination from './pagination';\nimport sort from './sort';\nimport cardDetails from './card-details';\nimport searchState from './search-state';\nimport cardsComparison from './cards-comparison';\n\nconst mtgApi = (function () {\n  const { dom, list: listSettings, state } = apiSettings;\n\n\n  function createList() {\n    const cardList = dom.cardsList;\n    const sortSelect = dom.sort;\n    const sortedCards = sort.sortElement(sortSelect);\n\n    cardList.innerHTML = listTemplates.generateTemplate(sortedCards);\n    cardDetails.addEventToCards();\n    cardsComparison.initCardButtonEvents();\n  }\n\n  function listPromise(url) {\n    if (state.isSearchInProgress) return;\n    \n    const postsPromise = fetch(url);\n    searchState.searchingInProgress();\n\n    postsPromise\n      .then(data => { \n        pagination.setHeaderSettings(data.headers);\n        pagination.createPagination();\n        return data.json(); \n      })\n      .then(data => {\n        apiSettings.setCurrentCards(data.cards);\n        searchState.searchingEnded();\n        return createList();\n      })\n      .catch((err) => {\n        console.error(err);\n        searchState.searchingEnded();\n      });\n  }\n\n  function showAdvancedMenu() {\n    if (dom.searchAdvanced.classList.contains('search__advanced--is-active')) {\n      dom.searchAdvanced.classList.remove('search__advanced--is-active');\n      listSettings.advancedSearch = false;\n    } else {\n      dom.searchAdvanced.classList.add('search__advanced--is-active');\n      listSettings.advancedSearch = true;\n    }\n  }\n\n  function changeDisplayCards() {\n    pagination.changeDisplayCardsAmount();\n    initSearch();\n  }\n\n  function initSearch(e) {\n    if (e) e.preventDefault();\n\n    const url = linkGenerator.generate();\n    listPromise(url);\n  }\n\n  function generateList() {\n    const url = linkGenerator.generate();\n    listPromise(url);\n  }\n\n  function initRandom() {\n    const url = linkGenerator.generateRandom();\n    listPromise(url);\n  }\n\n  function initEvents() {\n    dom.searchBtn.addEventListener('click', initSearch);\n    dom.form.addEventListener('submit', initSearch);\n    dom.sort.addEventListener('change', function () {\n      createList(apiSettings.getCurrentCards());\n    });\n\n    dom.displayCardsSelect.addEventListener('change', changeDisplayCards);\n    dom.expandBtn.addEventListener('click', showAdvancedMenu);\n  }\n\n  function initAdvancedFormSelects() {\n    dom.advancedSelects.forEach(select => {\n      const linkPart = select.dataset.link;\n      const postsPromise = fetch(linkGenerator.generateSpecialLink(linkPart));\n\n      postsPromise\n        .then(data => data.json())\n        .then(data => {\n          if (data[linkPart]) {\n            data[linkPart].forEach(item => {\n              item = linkPart === 'sets' ? item.name : item;\n              const option = document.createElement('option');\n              const textNode = document.createTextNode(item);\n\n              option.appendChild(textNode);\n              option.value = item;\n              select.appendChild(option);\n            });\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    });\n  }\n\n  function initApi() {\n    initRandom();\n    initEvents();\n    initAdvancedFormSelects();\n  }\n\n  return {\n    initApi,\n    createList,\n    generateList,\n  };\n}());\n\nexport default mtgApi;\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/api/api.js","import apiSettings from './settings';\nimport api from './api';\nimport cardsComparison from './cards-comparison';\n\nconst listTemplates = (function () {\n  const { list: listSetings, dom, cardsComparison: comparisonSettings } = apiSettings;\n\n  const msgEmptyList = 'No cards';\n  const noImgDiv = `\n    <div class=\"cards-list__no-img-wrap\">\n      <img class=\"cards-list__no-img\" src=\"img/logo-magic.png\" alt='No img'>\n      <span class=\"cards-list__no-img-label\">No image</span>\n    </div>\n  `;\n\n  function getGridTemplate(cards) {\n    return cards.map(card => {\n      let imgUrl = card.imageUrl || noImgDiv;\n      imgUrl = listSetings.showDefaultImg ? 'img/default-card.jpg' : imgUrl;\n\n      return `\n        <div class=\"cards-list__item cards-list__item--grid\" data-md-modal=\"${apiSettings.cardDetails.modalId}\" data-card-id=\"${card.id}\">\n          <div class=\"cards-list__img-wrap\">\n            ${card.imageUrl ? `<img src=\"${imgUrl}\" alt=\"${card.name}\" class=\"cards-list__img\"/>` : noImgDiv}\n          </div>\n\n          <header class=\"cards-list__header\">\n            <h4 class=\"cards-list__name\">${card.name}</h4>\n            <span class=\"cards-list__mana\">${replaceTextShorts(card.manaCost, 'cards-list__attribute-mana')}</span>\n            <span class=\"cards-list__mana-total\">${card.cmc ? `(${card.cmc})` : ''}</span>\n\n            <div class=\"cards-list__type\">${card.type}</div>\n            <div class=\"cards-list__set-rarity\">${card.setName} - ${card.rarity}</div>\n          </header>\n\n          <div class=\"cards-list__text\">${replaceTextShorts(card.text)}</div>\n          ${cardsComparison.getAddBtn(card.id)}\n        </div>`;\n    }).join('');    \n  }  \n\n\n  function getListTemplate(cards) {\n    return cards.map(card => {\n      let imgUrl = card.imageUrl || noImgDiv;\n      const textParts = ['artist', 'text', 'flavor', 'power', 'toughness'];\n      imgUrl = listSetings.showDefaultImg ? 'img/default-card.jpg' : imgUrl;\n      \n      const text = textParts.map(part => {\n        if (!card[part]) return '';\n\n        return `\n            <div class=\"cards-list__text\">\n              <span class=\"cards-list__text-label\">${part}: </span>\n              ${replaceTextShorts(card[part])}\n            </div>\n         `;\n      }).join('');\n\n\n      return `\n        <div class=\"cards-list__item cards-list__item--list\" data-md-modal=\"${apiSettings.cardDetails.modalId}\">\n          <div class=\"cards-list__img-wrap\">\n            ${card.imageUrl ? `<img src=\"${imgUrl}\" alt=\"${card.name}\" class=\"cards-list__img\"/>` : noImgDiv}\n          </div>\n\n          <div class=\"cards-list__body\">\n            <header class=\"cards-list__header\">\n              <h4 class=\"cards-list__name\">${card.name}</h4>\n              <span class=\"cards-list__mana\">${replaceTextShorts(card.manaCost, 'cards-list__attribute-mana')}</span>\n              <span class=\"cards-list__mana-total\">${card.cmc ? `(${card.cmc})` : ''}</span>\n\n              <div class=\"cards-list__type\">${card.type}</div>\n              <div class=\"cards-list__set-rarity\">${card.setName} - ${card.rarity}</div>\n            </header>\n\n            ${text}\n            ${cardsComparison.getAddBtn(card.id)}\n          </div>\n        </div>`;\n    }).join(''); \n  }\n\n  function generateTemplate(cards) {\n    if (!cards.length) {\n      return msgEmptyList;\n    }\n\n    if (listSetings.displayList === 'list') {\n      return getListTemplate(cards);\n    }\n\n    return getGridTemplate(cards);\n  }\n\n  function replaceTextShorts(string, shortClass = 'cards-list__attribute') {\n    if (!string) return '';\n\n    const regex = /(\\{([^)]{1,3})\\})/g;\n    const matches = [];\n    let match = regex.exec(string);\n    \n    while (match !== null) {\n      matches.push(match[1]);\n      match = regex.exec(string);\n    }\n    \n    for (match of matches) {\n      const imgName = match\n        .replace('{', '')\n        .replace('}', '')\n        .replace('/', '');\n      string = string.replace(match, `<img class=\"${shortClass}\" src=\"img/attributes/${imgName}.svg\" alt=\"${imgName}\">`);\n    }\n\n    return string;   \n  }\n\n  function changeGrid(e) {\n    if (this.classList.contains('list-grid__btn--is-active')) return false;\n\n    document.querySelector('.list-grid__btn--is-active').classList.remove('list-grid__btn--is-active');\n    this.classList.add('list-grid__btn--is-active');\n\n    listSetings.displayList = this.dataset.display;\n    api.createList();\n  }\n\n  function initEvent() {\n    dom.changeGridBtn.forEach(btn => {\n      btn.addEventListener('click', changeGrid);\n    });\n  }\n\n  initEvent();\n\n  return {\n    generateTemplate,\n    replaceTextShorts,\n  };\n}());\n\nexport default listTemplates;\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/api/list-templates.js","const modal = (function () {\n  const settings = {\n    initFromStart: true,\n    animationName: 'md-modal--effect-1',\n    modalClass: 'md-modal',\n    bodyClass: 'md-modal--open',\n    showModalClass: 'md-modal--show',\n    overlayClass: 'md-modal__overlay',\n    triggerButtonData: 'data-md-modal',\n    triggerBtnDataset: 'mdModal',\n    closeBtn: 'md-modal__btn-close',\n  };\n\n  function removeOverlay() {\n    document.querySelectorAll(`.${settings.overlayClass}`).forEach(overlay => {\n      overlay.parentNode.removeChild(overlay);\n    });\n  }\n\n  function addOverlay() {\n    removeOverlay();\n    const existingOverlay = document.querySelector(`.${settings.overlayClass}`);\n    const overlay = document.createElement('div');\n    overlay.classList.add(settings.overlayClass);\n    document.body.appendChild(overlay);\n  }\n\n  function openModal(modalId) {\n    const modalElement = document.getElementById(modalId);\n    if (!modalId) return false;\n    \n    modalElement.classList.add(settings.showModalClass);\n    document.body.classList.add(settings.bodyClass);\n    modalElement.style.display = 'block';\n    setTimeout(() => {\n      modalElement.classList.add(settings.animationName);\n      addOverlay();\n    }, 50);\n  }\n\n  function onClickOpen() {\n    const modalId = this.dataset[settings.triggerBtnDataset];\n    openModal(modalId);\n  }\n\n  function initAllButtons() {\n    const buttons = document.querySelectorAll(`[${settings.triggerButtonData}]`);\n    buttons.forEach(btn => { btn.addEventListener('click', onClickOpen); });\n  }\n\n  function closeModal() {\n    const visibleModal = document.querySelector(`.${settings.showModalClass}`);\n    if (!visibleModal) return false;\n\n    visibleModal.classList.remove(settings.showModalClass);\n    document.body.classList.remove(settings.bodyClass);\n    visibleModal.classList.remove(settings.animationName);\n  \n    setTimeout(() => {\n      visibleModal.style.display = 'none';\n      removeOverlay();  \n    }, 300);\n  }\n\n  function clickModalContent(e) {   \n    if (this === e.target) {\n      closeModal();\n    }\n  }\n\n  function initSpecificModal(modalId) {\n    const buttons = document.querySelectorAll(`[${settings.triggerButtonData}=\"${modalId}\"]`);\n    const modalElement = document.getElementById(modalId);\n    const closeBtn = modalElement.querySelector(`.${settings.closeBtn}`);\n    if (!buttons || !modalElement || !closeBtn) return false;\n\n    buttons.forEach(button => { button.addEventListener('click', onClickOpen); });\n    modalElement.addEventListener('click', clickModalContent);\n    closeBtn.addEventListener('click', closeModal);\n  }\n\n  function init() {\n    if (settings.initFromStart) initAllButtons();\n\n    document.querySelectorAll(`.${settings.closeBtn}`).forEach(button => {\n      button.addEventListener('click', closeModal);\n    });\n\n    document.querySelectorAll('.md-modal').forEach(modalElement => {\n      modalElement.addEventListener('click', clickModalContent);\n    });\n  }\n\n  init();\n\n  return {\n    init,\n    closeModal,\n    openModal,\n    onClickOpen,\n    initSpecificModal,\n  };\n}());\n\n\nexport default modal;\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/modal/modal.js","import apiSettings from './settings';\nimport listTemplates from './list-templates';\nimport modal from './../../assets/modal/modal';\n\nconst cardsComparison = (function () {\n  const { cardsComparison: comparisonSettings, dom } = apiSettings;\n  const selectedCards = JSON.parse(localStorage.getItem('selectedCards')) || [];\n  const buttonStates = {\n    add: { \n      text: 'Porównaj',\n      dataChangeText: 'Usuń z porównywarki',\n      action: 'add',\n    },\n    remove: { \n      text: 'Usuń z porównywarki',\n      dataChangeText: 'Porównaj',\n      action: 'remove',\n    },\n  };\n\n  function switchPanel() {\n    const panel = this.parentNode;\n    const hasClassActive = panel.classList.contains('comparison__panel--is-active');\n    if (hasClassActive) {\n      panel.classList.remove('comparison__panel--is-active');\n    } else {\n      panel.classList.add('comparison__panel--is-active');\n    }\n  }\n\n  function getAddBtn(cardId) {\n    const card = selectedCards.find(item => item.id === cardId);\n    const currentState = card ? buttonStates.remove : buttonStates.add;\n\n    return `<button \n              type=\"button\" \n              class=\"${comparisonSettings.addCardClass} \n              btn--small btn\" \n              data-card-id=\"${cardId}\" \n              data-action=\"${currentState.action}\" \n              data-text-change=\"${currentState.dataChangeText}\">${currentState.text}</button>`;\n  }\n\n  function refreshCompareList() {\n    const compareList = document.querySelector('.comparison__list');\n    compareList.innerHTML = '';\n    if (!selectedCards.length) return false;\n\n    compareList.innerHTML = selectedCards.map(card => `\n      <li class=\"comparison__list-item\">\n        <img class=\"comparison__list-img\" src=\"${card.imageUrl}\">\n        <h6 class=\"comparison__list-title\">${card.name}</h6>\n        <button class=\"comparison__remove-btn\" data-card-id=\"${card.id}\" type=\"button\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></button>\n      </li>\n    `).join('');\n\n    const comparisonRemoveBtns = document.querySelectorAll('.comparison__remove-btn');\n    comparisonRemoveBtns.forEach(button => {\n      button.addEventListener('click', function () { removeFromCompare(this.dataset.cardId); });\n    });\n  }\n\n  function addToCompare(cardId) {\n    const card = apiSettings.getCurrentCards().find(item => item.id === cardId);\n    const cardInSelectedCards = selectedCards.find(item => item.id === cardId);\n    if (!card || cardInSelectedCards) return false;\n\n    selectedCards.push(card);\n    localStorage.setItem('selectedCards', JSON.stringify(selectedCards));\n    refreshCompareList();\n  }\n\n  function removeFromCompare(carId) {\n    const cardIndex = selectedCards.findIndex(item => item.id === carId);\n    if (cardIndex === undefined) return false;\n    selectedCards.splice(cardIndex, 1);\n    localStorage.setItem('selectedCards', JSON.stringify(selectedCards));\n    refreshCompareList();\n  }\n\n  function addEventToCardButton(e) {\n    e.stopPropagation();\n    const carId = this.dataset.cardId;\n    const action = this.dataset.action;\n    const currentBtnText = this.textContent;\n    const newBtnText = this.dataset.textChange;\n\n    this.textContent = newBtnText;\n    this.dataset.textChange = currentBtnText;\n    this.dataset.action = action === 'add' ? 'remove' : 'add';\n\n    if (action === 'add') {\n      addToCompare(carId);\n    } else {\n      removeFromCompare(carId);\n    }\n  }\n\n  function initCardButtonEvents() {\n    const buttons = document.querySelectorAll(`.${comparisonSettings.addCardClass}`);\n    buttons.forEach(button => { button.addEventListener('click', addEventToCardButton); });\n  }\n\n  function addModal() {\n    const modalElement = document.createElement('div');\n    modalElement.classList.add('md-modal', 'comparison__modal');\n    modalElement.setAttribute('id', 'modal-card-compare');\n    modalElement.innerHTML = `\n      <div class=\"comparison__modal-dialog md-modal__dialog--full md-modal__dialog\">\n        <div class=\"md-modal__content\">\n          <header class=\"md-modal__header\">\n            <h3 class=\"md-modal__title\">Comparison</h3>\n            <button class=\"md-modal__btn-close\">&times</button>\n          </header>\n\n          <div class=\"compare-list comparison__modal-body md-modal__body\">\n            \n          </div>\n        </div>\n      </div>    \n    `;\n\n    document.body.appendChild(modalElement);\n    modal.initSpecificModal('modal-card-compare');\n  }\n\n  function addPanel() {\n    const comparisonPanel = document.createElement('aside');\n    comparisonPanel.classList.add('comparison__panel');\n    comparisonPanel.innerHTML = (`\n        <button class=\"comparison__btn-toggle\"><i class=\"fa fa-refresh\" aria-hidden=\"true\"></i></button>\n        <div class=\"comparison__header\">\n          <button class=\"comparison__btn-compare btn\" data-md-modal=\"modal-card-compare\">Compare choosen cards</button>\n        </div>\n        <ul class=\"comparison__list\"></ul>\n    `);\n    document.body.appendChild(comparisonPanel);\n  }\n\n\n  function generateAttributes(card) {\n    let attributeText = '';\n    const attributes = [\n      {\n        name: 'name',\n        type: 'text',\n      },\n      {\n        name: 'manaCost',\n        type: 'withMana',\n      },\n      {\n        name: 'cmc',\n        type: 'text',\n      },\n      {\n        name: 'types',\n        type: 'array',\n      },\n      {\n        name: 'subtypes',\n        type: 'array',\n      },\n      {\n        name: 'rarity',\n        type: 'text',\n      },\n      {\n        name: 'setName',\n        type: 'text',\n      },\n      {\n        name: 'power',\n        type: 'text',\n      },\n      {\n        name: 'toughness',\n        type: 'text',\n      },\n      {\n        name: 'text',\n        type: 'withMana',\n      },      \n    ];\n\n    for (const attribute of attributes) {\n      let attributeValue = card[attribute.name];\n      if (attributeValue === undefined) attributeValue = '';\n\n      if (attribute.type === 'withMana') {\n        attributeValue = listTemplates.replaceTextShorts(attributeValue);\n      } else if (attribute.type === 'array') {\n        attributeValue = Array.from(attributeValue);\n        attributeValue = attributeValue.join(' ');\n      }\n\n      attributeText += `\n          <div class=\"compare-list__attribute--${attribute.name} compare-list__attribute\">\n            <div class=\"compare-list__attribute-name\">${attribute.name}</div>\n            <div class=\"compare-list__attribute-value\">${attributeValue}</div>\n          </div>\n      `;\n    }\n\n    return attributeText;\n  }\n\n  function compareCards() {\n    const modalBody = document.querySelector('.comparison__modal-body');\n\n    if (selectedCards.length < 2) {\n      modalBody.innerHTML = 'Za mało kart aby porównać';\n      return false;\n    }\n\n    modalBody.innerHTML = selectedCards.map(card => {\n      const imgUrl = card.imageUrl;\n      return `\n        <div class=\"compare-list__item\">\n          <div class=\"compare-list__img-wrap\">\n            <img class=\"compare-list__img\" src=\"${imgUrl}\">\n          </div>\n\n          <div class=\"compare-list__body\">${generateAttributes(card)}</div>\n        </div>\n      `;\n    }).join('');\n  }\n\n  function initComparisonPanel() {\n    addPanel();\n\n    const switchPanelBtn = document.querySelector('.comparison__btn-toggle');\n    switchPanelBtn.addEventListener('click', switchPanel);\n\n    const compareBtn = document.querySelector('.comparison__btn-compare');\n    compareBtn.addEventListener('click', compareCards);\n\n    refreshCompareList();\n    addModal();\n  }\n\n  initComparisonPanel();\n\n  return {\n    getAddBtn,\n    initCardButtonEvents,\n  };\n}());\n\n\nexport default cardsComparison;\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/api/cards-comparison.js"],"sourceRoot":""}